<!--
  Users Page
  Displays user management interface with filtering and user details
-->
<!DOCTYPE html>
<html lang="en">
  <!-- Document head section -->
  <head>
    <!-- Base URL for resolving relative paths -->
    <base href="/" />
    <!-- Character encoding declaration -->
    <meta charset="utf-8" />
    <!-- Viewport meta tag for responsive design -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Page title displayed in browser tab -->
    <title>Users</title>
    <!-- Bootstrap CSS framework from CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons from CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <!-- Main application stylesheet -->
    <link href="assets/css/main.css" rel="stylesheet" />
    <!-- Component stylesheets -->
    <link href="assets/css/table.css" rel="stylesheet" />
    <link href="assets/css/tabs.css" rel="stylesheet" />
    <link href="assets/css/badge.css" rel="stylesheet" />
    <link href="assets/css/spinner.css" rel="stylesheet" />
    <link href="assets/css/filter-chips.css" rel="stylesheet" />
    <link href="assets/css/carousel.css" rel="stylesheet" />
    <link href="assets/css/notice.css" rel="stylesheet" />
    <link href="assets/css/notes-panel.css" rel="stylesheet" />
    <!-- Page-specific stylesheet -->
    <link href="page/users/style.css" rel="stylesheet" />
    <!-- API Configuration: Configure API endpoints per environment. Set endpoint to use real API, or leave empty to use dummy data. Example: "endpoint": "https://api.example.com/users" -->
    <script type="application/json" id="api-config">
      {
        "users": {
          "prod": {
            "endpoint": "users"
          },
          "stage": {
            "endpoint": "users"
          },
          "dev": {
            "endpoint": ""
          }
        }
      }
    </script>
  </head>
  <!-- Document body with section identifier -->
  <body data-section="users">
    <!-- Main application shell container -->
    <div class="app-shell">
      <!-- Sidebar navigation container -->
      <aside class="app-sidebar">
        <!-- Sidebar header with logo and title -->
        <div class="d-flex align-items-center gap-2 mb-3">
          <div class="logo-dot"></div>
          <strong>Admin</strong>
        </div>
        <!-- Sidebar navigation menu (populated by JavaScript) -->
        <nav id="sidebarNav" class="nav flex-column gap-1"></nav>
      </aside>
      <!-- Main content area -->
      <main class="app-main">
        <!-- Page header with title and action buttons -->
        <div class="d-flex align-items-center justify-content-between mb-3">
          <!-- Page title (updated by JavaScript) -->
          <h1 id="pageTitle" class="app-title h4 mb-0">Users</h1>
          <!-- Action buttons container -->
          <div class="d-flex gap-2">
            <!-- Environment selector dropdown (prod/stage/dev) -->
            <select id="envSelect" class="form-select form-select-sm env-pill w-auto"></select>
            <!-- Filter button - opens filter offcanvas panel -->
            <button
              id="filterBtn"
              class="btn btn-outline-primary btn-sm"
              data-bs-toggle="offcanvas"
              data-bs-target="#filterOffcanvas"
              aria-controls="filterOffcanvas"
            >
              <i class="bi bi-funnel"></i>
            </button>
            <button id="createUserBtn" class="btn btn-primary btn-sm">
              <i class="bi bi-person-plus"></i> Create User
            </button>
            <!-- Reset filters button - appears when filters are active -->
            <button
              id="resetFiltersBtn"
              class="btn btn-outline-secondary btn-sm"
              style="display: none"
            >
              <i class="bi bi-x-circle"></i> Reset
            </button>
            <!-- Refresh button - reloads page data -->
            <button
              class="btn btn-primary btn-sm"
              onclick="document.body.dispatchEvent(new CustomEvent('section:refresh'));"
            >
              Refresh
            </button>
          </div>
        </div>
        <!-- Page content container (populated by JavaScript) -->
        <div id="pageContent" class="page-content"></div>
        <!-- Notes section -->
        <div class="card notes-below">
          <div class="card-body">
            <div class="d-flex align-items-center gap-2 mb-2">
              <i class="bi bi-sticky"></i>
              <strong>Stats Overview</strong>
            </div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item">Total creators registered</li>
              <li class="list-group-item">Total fans registered</li>
              <li class="list-group-item">Total media uploaded (image, video, audio)</li>
            </ul>
          </div>
        </div>
      </main>
    </div>

    <!-- User Profile Offcanvas -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="userProfileOffcanvas" aria-labelledby="userProfileOffcanvasLabel">
      <div class="offcanvas-header border-bottom">
        <h5 class="offcanvas-title" id="userProfileOffcanvasLabel">User Profile</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body" id="userProfileOffcanvasBody">
        <div class="text-center py-5">
           <div class="spinner-border text-primary"></div>
        </div>
      </div>
    </div>

    <!-- User Settings Offcanvas -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="userSettingsOffcanvas" aria-labelledby="userSettingsOffcanvasLabel">
      <div class="offcanvas-header border-bottom">
        <h5 class="offcanvas-title" id="userSettingsOffcanvasLabel">User Settings</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body" id="userSettingsOffcanvasBody">
        <!-- Content loaded dynamically -->
        <div class="text-center py-5">
           <div class="spinner-border text-primary"></div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JavaScript bundle from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core JavaScript modules -->
    <!-- Utility functions -->
    <script src="assets/js/core/utils.js"></script>
    <!-- State management -->
    <script src="assets/js/core/state.js"></script>
    <!-- Configuration data -->
    <script src="assets/js/core/config.js"></script>
    <!-- Services -->
    <!-- API service for data fetching -->
    <script src="assets/js/services/api-adapters.js"></script>
    <script src="assets/js/services/api-service.js"></script>
    <!-- Utilities -->
    <script src="assets/js/utils/moderation-utils.js"></script>
    <script src="assets/js/utils/processing.js"></script>
    <!-- UI Components -->
    <!-- Sidebar navigation component -->
    <script src="assets/js/ui/sidebar.js"></script>
    <!-- Environment selector component -->
    <script src="assets/js/ui/env-selector.js"></script>
    <!-- Filter panel component -->
    <script src="assets/js/ui/filter-panel.js"></script>
    <!-- Modal viewer component -->
    <script src="assets/js/ui/modal-viewer.js"></script>
    <!-- Notes panel component -->
    <script src="assets/js/ui/notes-panel.js"></script>
    <!-- Tabs component -->
    <script src="assets/js/ui/tabs.js"></script>
    <!-- Table component -->
    <script src="assets/js/ui/table.js"></script>
    <!-- Page renderer utility -->
    <script src="assets/js/ui/page-renderer.js"></script>
    <!-- Main -->
    <!-- Main admin panel orchestrator -->
    <script src="assets/js/admin.js"></script>
    <!-- Page-specific -->
    <!-- Page-specific JavaScript logic -->
<script src="page/users/script.js" defer></script>
  </body>
</html>
